/**
 * jQuery EasyUI 1.4.2
 * 
 * Copyright (c) 2009-2015 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */


!function(o){function e(e,t){for(var i=o.data(e,"combobox"),n=i.options,a=i.data,r=0;r<a.length;r++)if(a[r][n.valueField]==t)return r;return-1}function t(e,t){var i=o.data(e,"combobox").options,n=o(e).combo("panel"),a=i.finder.getEl(e,t);if(a.length)if(a.position().top<=0){var r=n.scrollTop()+a.position().top;n.scrollTop(r)}else if(a.position().top+a.outerHeight()>n.height()){var r=n.scrollTop()+a.position().top+a.outerHeight()-n.height();n.scrollTop(r)}}function i(e,i){var a=o.data(e,"combobox").options,r=o(e).combobox("panel"),l=r.children("div.combobox-item-hover");l.length||(l=r.children("div.combobox-item-selected")),l.removeClass("combobox-item-hover");var s="div.combobox-item:visible:not(.combobox-item-disabled):first",c="div.combobox-item:visible:not(.combobox-item-disabled):last";if(l.length?"next"==i?(l=l.nextAll(s),l.length||(l=r.children(s))):(l=l.prevAll(s),l.length||(l=r.children(c))):l=r.children("next"==i?s:c),l.length){l.addClass("combobox-item-hover");var b=a.finder.getRow(e,l);b&&(t(e,b[a.valueField]),a.selectOnNavigation&&n(e,b[a.valueField]))}}function n(e,t){var i=o.data(e,"combobox").options,n=o(e).combo("getValues");-1==o.inArray(t+"",n)&&(i.multiple?n.push(t):n=[t],r(e,n),i.onSelect.call(e,i.finder.getRow(e,t)))}function a(e,t){var i=o.data(e,"combobox").options,n=o(e).combo("getValues"),a=o.inArray(t+"",n);a>=0&&(n.splice(a,1),r(e,n),i.onUnselect.call(e,i.finder.getRow(e,t)))}function r(e,t,i){var n=o.data(e,"combobox").options,a=o(e).combo("panel");o.isArray(t)||(t=t.split(n.separator)),a.find("div.combobox-item-selected").removeClass("combobox-item-selected");for(var r=[],l=[],s=0;s<t.length;s++){var c=t[s],b=c;n.finder.getEl(e,c).addClass("combobox-item-selected");var d=n.finder.getRow(e,c);d&&(b=d[n.textField]),r.push(c),l.push(b)}i||o(e).combo("setText",l.join(n.separator)),o(e).combo("setValues",r)}function l(e,t,i){var n=o.data(e,"combobox"),a=n.options;n.data=a.loadFilter.call(e,t),n.groups=[],t=n.data;for(var l=o(e).combobox("getValues"),s=[],c=void 0,b=0;b<t.length;b++){var d=t[b],u=d[a.valueField]+"",m=d[a.textField],f=d[a.groupField];f?c!=f&&(c=f,n.groups.push(f),s.push('<div id="'+n.groupIdPrefix+"_"+(n.groups.length-1)+'" class="combobox-group">'),s.push(a.groupFormatter?a.groupFormatter.call(e,f):f),s.push("</div>")):c=void 0;var h="combobox-item"+(d.disabled?" combobox-item-disabled":"")+(f?" combobox-gitem":"");s.push('<div id="'+n.itemIdPrefix+"_"+b+'" class="'+h+'">'),s.push(a.formatter?a.formatter.call(e,d):m),s.push("</div>"),d.selected&&-1==o.inArray(u,l)&&l.push(u)}o(e).combo("panel").html(s.join("")),a.multiple?r(e,l,i):r(e,l.length?[l[l.length-1]]:[],i),a.onLoadSuccess.call(e,t)}function s(e,t,i,n){var a=o.data(e,"combobox").options;t&&(a.url=t),i=o.extend({},a.queryParams,i||{}),0!=a.onBeforeLoad.call(e,i)&&a.loader.call(e,i,function(o){l(e,o,n)},function(){a.onLoadError.apply(this,arguments)})}function c(e,t){function i(o){r(e,a.multiple?t?o:[]:o,!0)}var n=o.data(e,"combobox"),a=n.options,l=a.multiple?t.split(a.separator):[t];if("remote"==a.mode)i(l),s(e,null,{q:t},!0);else{var c=o(e).combo("panel");c.find("div.combobox-item-selected,div.combobox-item-hover").removeClass("combobox-item-selected combobox-item-hover"),c.find("div.combobox-item,div.combobox-group").hide();var b=n.data,d=[];o.map(l,function(t){t=o.trim(t);for(var i=t,r=void 0,l=0;l<b.length;l++){var s=b[l];if(a.filter.call(e,t,s)){var c=s[a.valueField],u=s[a.textField],m=s[a.groupField],f=a.finder.getEl(e,c).show();u.toLowerCase()==t.toLowerCase()&&(i=c,f.addClass("combobox-item-selected")),a.groupField&&r!=m&&(o("#"+n.groupIdPrefix+"_"+o.inArray(m,n.groups)).show(),r=m)}}d.push(i)}),i(d)}}function b(t){var i=o(t),n=i.combobox("options"),a=i.combobox("panel"),r=a.children("div.combobox-item-hover");if(r.length){var l=n.finder.getRow(t,r),s=l[n.valueField];n.multiple&&r.hasClass("combobox-item-selected")?i.combobox("unselect",s):i.combobox("select",s)}var c=[];o.map(i.combobox("getValues"),function(o){e(t,o)>=0&&c.push(o)}),i.combobox("setValues",c),n.multiple||i.combobox("hidePanel")}function d(e){var i=o.data(e,"combobox"),r=i.options;u++,i.itemIdPrefix="_easyui_combobox_i"+u,i.groupIdPrefix="_easyui_combobox_g"+u,o(e).addClass("combobox-f"),o(e).combo(o.extend({},r,{onShowPanel:function(){o(e).combo("panel").find("div.combobox-item,div.combobox-group").show(),t(e,o(e).combobox("getValue")),r.onShowPanel.call(e)}})),o(e).combo("panel").unbind().bind("mouseover",function(e){o(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var t=o(e.target).closest("div.combobox-item");t.hasClass("combobox-item-disabled")||t.addClass("combobox-item-hover"),e.stopPropagation()}).bind("mouseout",function(e){o(e.target).closest("div.combobox-item").removeClass("combobox-item-hover"),e.stopPropagation()}).bind("click",function(t){var i=o(t.target).closest("div.combobox-item");if(i.length&&!i.hasClass("combobox-item-disabled")){var l=r.finder.getRow(e,i);if(l){var s=l[r.valueField];r.multiple?i.hasClass("combobox-item-selected")?a(e,s):n(e,s):(n(e,s),o(e).combo("hidePanel")),t.stopPropagation()}}})}var u=0;o.fn.combobox=function(e,t){if("string"==typeof e){var i=o.fn.combobox.methods[e];return i?i(this,t):this.combo(e,t)}return e=e||{},this.each(function(){var t=o.data(this,"combobox");if(t)o.extend(t.options,e),d(this);else{t=o.data(this,"combobox",{options:o.extend({},o.fn.combobox.defaults,o.fn.combobox.parseOptions(this),e),data:[]}),d(this);var i=o.fn.combobox.parseData(this);i.length&&l(this,i)}t.options.data&&l(this,t.options.data),s(this)})},o.fn.combobox.methods={options:function(e){var t=e.combo("options");return o.extend(o.data(e[0],"combobox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},getData:function(e){return o.data(e[0],"combobox").data},setValues:function(o,e){return o.each(function(){r(this,e)})},setValue:function(o,e){return o.each(function(){r(this,[e])})},clear:function(e){return e.each(function(){o(this).combo("clear"),o(this).combo("panel").find("div.combobox-item-selected").removeClass("combobox-item-selected")})},reset:function(e){return e.each(function(){var e=o(this).combobox("options");e.multiple?o(this).combobox("setValues",e.originalValue):o(this).combobox("setValue",e.originalValue)})},loadData:function(o,e){return o.each(function(){l(this,e)})},reload:function(e,t){return e.each(function(){if("string"==typeof t)s(this,t);else{if(t){o(this).combobox("options").queryParams=t}s(this)}})},select:function(o,e){return o.each(function(){n(this,e)})},unselect:function(o,e){return o.each(function(){a(this,e)})}},o.fn.combobox.parseOptions=function(e){o(e);return o.extend({},o.fn.combo.parseOptions(e),o.parser.parseOptions(e,["valueField","textField","groupField","mode","method","url"]))},o.fn.combobox.parseData=function(e){function t(e,t){var a=o(e),r={};r[n.valueField]=void 0!=a.attr("value")?a.attr("value"):a.text(),r[n.textField]=a.text(),r.selected=a.is(":selected"),r.disabled=a.is(":disabled"),t&&(n.groupField=n.groupField||"group",r[n.groupField]=t),i.push(r)}var i=[],n=o(e).combobox("options");return o(e).children().each(function(){if("optgroup"==this.tagName.toLowerCase()){var e=o(this).attr("label");o(this).children().each(function(){t(this,e)})}else t(this)}),i},o.fn.combobox.defaults=o.extend({},o.fn.combo.defaults,{valueField:"value",textField:"text",groupField:null,groupFormatter:function(o){return o},mode:"local",method:"post",url:null,data:null,queryParams:{},keyHandler:{up:function(o){i(this,"prev"),o.preventDefault()},down:function(o){i(this,"next"),o.preventDefault()},left:function(o){},right:function(o){},enter:function(o){b(this)},query:function(o,e){c(this,o)}},filter:function(e,t){return 0==t[o(this).combobox("options").textField].toLowerCase().indexOf(e.toLowerCase())},formatter:function(e){return e[o(this).combobox("options").textField]},loader:function(e,t,i){var n=o(this).combobox("options");if(!n.url)return!1;o.ajax({type:n.method,url:n.url,data:e,dataType:"json",success:function(o){t(o)},error:function(){i.apply(this,arguments)}})},loadFilter:function(o){return o},finder:{getEl:function(t,i){var n=e(t,i),a=o.data(t,"combobox").itemIdPrefix+"_"+n;return o("#"+a)},getRow:function(t,i){var n=o.data(t,"combobox"),a=i instanceof jQuery?i.attr("id").substr(n.itemIdPrefix.length+1):e(t,i);return n.data[parseInt(a)]}},onBeforeLoad:function(o){},onLoadSuccess:function(){},onLoadError:function(){},onSelect:function(o){},onUnselect:function(o){}})}(jQuery);
//# sourceMappingURL=jquery.combobox.js.map