jQuery.extend({createUploadIframe:function(e,t){var r="jUploadFrame"+e,o='<iframe id="'+r+'" name="'+r+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?o+=' src="javascript:false"':"string"==typeof t&&(o+=' src="'+t+'"')),o+=" />",jQuery(o).appendTo(document.body),jQuery("#"+r).get(0)},createUploadForm:function(e,t,r,o){var a="jUploadForm"+e,n="jUploadFile"+e,u=jQuery('<form  action="" method="POST" name="'+a+'" id="'+a+'" enctype="multipart/form-data"></form>');if(r)for(var c in r)jQuery('<input type="hidden" name="'+c+"\" value='"+r[c].replace(/\'/g,'"')+"' />").appendTo(u);var d;d=null==o?jQuery("#"+t):o;var l=jQuery(d).clone();return jQuery(d).attr("id",n),jQuery(d).before(l),jQuery(d).appendTo(u),jQuery(u).css("position","absolute"),jQuery(u).css("top","-1200px"),jQuery(u).css("left","-1200px"),jQuery(u).appendTo("body"),u},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=!0;if(e.beforeUpload&&(t=e.beforeUpload()),void 0==t||t){var r=(new Date).getTime(),o=jQuery.createUploadForm(r,e.fileElementId,void 0!==e.data&&e.data,e.fileElement),a=(jQuery.createUploadIframe(r,e.secureuri),"jUploadFrame"+r),n="jUploadForm"+r;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var u=!1,c={};e.global&&jQuery.event.trigger("ajaxSend",[c,e]);var d=function(t){var r=document.getElementById(a);try{r.contentWindow?(c.responseText=r.contentWindow.document.body?r.contentWindow.document.body.innerHTML:null,c.responseXML=r.contentWindow.document.XMLDocument?r.contentWindow.document.XMLDocument:r.contentWindow.document):r.contentDocument&&(c.responseText=r.contentDocument.document.body?r.contentDocument.document.body.innerHTML:null,c.responseXML=r.contentDocument.document.XMLDocument?r.contentDocument.document.XMLDocument:r.contentDocument.document)}catch(t){jQuery.handleError(e,c,null,t)}if(c||"timeout"==t){u=!0;var n;try{if("error"!=(n="timeout"!=t?"success":"error")){var d=jQuery.uploadHttpData(c,e.dataType);e.success&&e.success(d,n),e.global&&jQuery.event.trigger("ajaxSuccess",[c,e])}else jQuery.handleError(e,c,n)}catch(t){n="error",jQuery.handleError(e,c,n,t)}e.global&&jQuery.event.trigger("ajaxComplete",[c,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(c,n),jQuery(r).unbind(),setTimeout(function(){try{jQuery(r).remove(),jQuery(o).remove()}catch(t){jQuery.handleError(e,c,null,t)}},100),c=null}};e.timeout>0&&setTimeout(function(){u||d("timeout")},e.timeout);try{var o=jQuery("#"+n);jQuery(o).attr("action",e.url),jQuery(o).attr("method","POST"),jQuery(o).attr("target",a),o.encoding?jQuery(o).attr("encoding","multipart/form-data"):jQuery(o).attr("enctype","multipart/form-data"),jQuery(o).submit()}catch(t){jQuery.handleError(e,c,null,t)}return jQuery("#"+a).load(d),{abort:function(){try{jQuery("#"+a).remove(),jQuery(o).remove()}catch(e){}}}}},uploadHttpData:function(r,type){var data=!type;if(data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type){var reg=/<pre.+?>(.+)<\/pre>/g;data=data.match(reg),eval("data = "+RegExp.$1)}return"html"==type&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(e,t,r,o){e.error&&e.error(t,r,o),e.global&&jQuery.event.trigger("ajaxError",[t,e,o])}});
//# sourceMappingURL=ajaxfileupload.js.map