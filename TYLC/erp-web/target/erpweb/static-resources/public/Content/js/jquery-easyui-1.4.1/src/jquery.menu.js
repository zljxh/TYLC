/**
 * jQuery EasyUI 1.4.1
 * 
 * Copyright (c) 2009-2014 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the GPL license: http://www.gnu.org/licenses/gpl.txt
 * To use it on other terms please contact us at info@jeasyui.com
 *
 */


!function($){function init(e){function t(n){var i=[];return n.addClass("menu"),i.push(n),n.hasClass("menu-content")||n.children("div").each(function(){var n=$(this).children("div");if(n.length){n.insertAfter(e),this.submenu=n;var o=t(n);i=i.concat(o)}}),i}$(e).appendTo("body"),$(e).addClass("menu-top"),$(document).unbind(".menu").bind("mousedown.menu",function(e){$(e.target).closest("div.menu,div.combo-p").length||$("body>div.menu-top:visible").menu("hide")});for(var n=t($(e)),i=0;i<n.length;i++)!function(t){var n=$.parser.parseOptions(t[0],["width","height"]);t[0].originalHeight=n.height||0,t.hasClass("menu-content")?t[0].originalWidth=n.width||t._outerWidth():(t[0].originalWidth=n.width||0,t.children("div").each(function(){var t=$(this),n=$.extend({},$.parser.parseOptions(this,["name","iconCls","href",{separator:"boolean"}]),{disabled:!!t.attr("disabled")||void 0});if(n.separator&&t.addClass("menu-sep"),!t.hasClass("menu-sep")){t[0].itemName=n.name||"",t[0].itemHref=n.href||"";var i=t.addClass("menu-item").html();t.empty().append($('<div class="menu-text"></div>').html(i)),n.iconCls&&$('<div class="menu-icon"></div>').addClass(n.iconCls).appendTo(t),n.disabled&&setDisabled(e,t[0],!0),t[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(t),bindMenuItemEvent(e,t)}}),$('<div class="menu-line"></div>').prependTo(t)),setMenuSize(e,t),t.hide(),bindMenuEvent(e,t)}(n[i])}function setMenuSize(e,t){var n=$.data(e,"menu").options,i=t.attr("style")||"";t.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"});var o=t[0],a=o.originalWidth||0;a||(a=0,t.find("div.menu-text").each(function(){a<$(this)._outerWidth()&&(a=$(this)._outerWidth()),$(this).closest("div.menu-item")._outerHeight($(this)._outerHeight()+2)}),a+=40),a=Math.max(a,n.minWidth);var s=o.originalHeight||0;if(!s)if(s=t.outerHeight(),t.hasClass("menu-top")&&n.alignTo){var u=$(n.alignTo),r=u.offset().top-$(document).scrollTop(),d=$(window)._outerHeight()+$(document).scrollTop()-u.offset().top-u._outerHeight();s=Math.min(s,Math.max(r,d))}else s>$(window)._outerHeight()?(s=$(window).height(),i+=";overflow:auto"):i+=";overflow:hidden";var m=Math.max(o.originalHeight,t.outerHeight())-2;t._outerWidth(a)._outerHeight(s),t.children("div.menu-line")._outerHeight(m),i+=";width:"+o.style.width+";height:"+o.style.height,t.attr("style",i)}function bindMenuEvent(e,t){var n=$.data(e,"menu");t.unbind(".menu").bind("mouseenter.menu",function(){n.timer&&(clearTimeout(n.timer),n.timer=null)}).bind("mouseleave.menu",function(){n.options.hideOnUnhover&&(n.timer=setTimeout(function(){hideAll(e)},n.options.duration))})}function bindMenuItemEvent(e,t){t.hasClass("menu-item")&&(t.unbind(".menu"),t.bind("click.menu",function(){if(!$(this).hasClass("menu-item-disabled")){if(!this.submenu){hideAll(e);var t=this.itemHref;t&&(location.href=t)}var n=$(e).menu("getItem",this);$.data(e,"menu").options.onClick.call(e,n)}}).bind("mouseenter.menu",function(n){if(t.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),t.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))return void t.addClass("menu-active-disabled");var i=t[0].submenu;i&&$(e).menu("show",{menu:i,parent:t})}).bind("mouseleave.menu",function(e){t.removeClass("menu-active menu-active-disabled");var n=t[0].submenu;n?e.pageX>=parseInt(n.css("left"))?t.addClass("menu-active"):hideMenu(n):t.removeClass("menu-active")}))}function hideAll(e){var t=$.data(e,"menu");return t&&$(e).is(":visible")&&(hideMenu($(e)),t.options.onHide.call(e)),!1}function showMenu(e,t){function n(e,t){return e+a.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(e=t?$(t).offset().top-a._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-a.outerHeight()),e<0&&(e=0),e}var i,o;t=t||{};var a=$(t.menu||e);if($(e).menu("resize",a[0]),a.hasClass("menu-top")){var s=$.data(e,"menu").options;if($.extend(s,t),i=s.left,o=s.top,s.alignTo){var u=$(s.alignTo);i=u.offset().left,o=u.offset().top+u._outerHeight(),"right"==s.align&&(i+=u.outerWidth()-a.outerWidth())}i+a.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(i=$(window)._outerWidth()+$(document).scrollLeft()-a.outerWidth()-5),i<0&&(i=0),o=n(o,s.alignTo)}else{var r=t.parent;i=r.offset().left+r.outerWidth()-2,i+a.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(i=r.offset().left-a.outerWidth()+2),o=n(r.offset().top-3)}a.css({left:i,top:o}),a.show(0,function(){a[0].shadow||(a[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(a)),a[0].shadow.css({display:"block",zIndex:$.fn.menu.defaults.zIndex++,left:a.css("left"),top:a.css("top"),width:a.outerWidth(),height:a.outerHeight()}),a.css("z-index",$.fn.menu.defaults.zIndex++),a.hasClass("menu-top")&&$.data(a[0],"menu").options.onShow.call(a[0])})}function hideMenu(e){e&&(!function(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide(),e.hide()}(e),e.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(e,t){function n(a){a.children("div.menu-item").each(function(){var a=$(e).menu("getItem",this),s=o.empty().html(a.text).text();t==$.trim(s)?i=a:this.submenu&&!i&&n(this.submenu)})}var i=null,o=$("<div></div>");return n($(e)),o.remove(),i}function setDisabled(e,t,n){var i=$(t);i.hasClass("menu-item")&&(n?(i.addClass("menu-item-disabled"),t.onclick&&(t.onclick1=t.onclick,t.onclick=null)):(i.removeClass("menu-item-disabled"),t.onclick1&&(t.onclick=t.onclick1,t.onclick1=null)))}function appendItem(target,param){var menu=$(target);if(param.parent){if(!param.parent.submenu){var submenu=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body");submenu.hide(),param.parent.submenu=submenu,$('<div class="menu-rightarrow"></div>').appendTo(param.parent)}menu=param.parent.submenu}if(param.separator)var item=$('<div class="menu-sep"></div>').appendTo(menu);else{var item=$('<div class="menu-item"></div>').appendTo(menu);$('<div class="menu-text"></div>').html(param.text).appendTo(item)}param.iconCls&&$('<div class="menu-icon"></div>').addClass(param.iconCls).appendTo(item),param.id&&item.attr("id",param.id),param.name&&(item[0].itemName=param.name),param.href&&(item[0].itemHref=param.href),param.onclick&&("string"==typeof param.onclick?item.attr("onclick",param.onclick):item[0].onclick=eval(param.onclick)),param.handler&&(item[0].onclick=eval(param.handler)),param.disabled&&setDisabled(target,item[0],!0),bindMenuItemEvent(target,item),bindMenuEvent(target,menu),setMenuSize(target,menu)}function removeItem(e,t){function n(e){if(e.submenu){e.submenu.children("div.menu-item").each(function(){n(this)});var t=e.submenu[0].shadow;t&&t.remove(),e.submenu.remove()}$(e).remove()}var i=$(t).parent();n(t),setMenuSize(e,i)}function setVisible(e,t,n){var i=$(t).parent();n?$(t).show():$(t).hide(),setMenuSize(e,i)}function destroyMenu(e){$(e).children("div.menu-item").each(function(){removeItem(e,this)}),e.shadow&&e.shadow.remove(),$(e).remove()}$.fn.menu=function(e,t){return"string"==typeof e?$.fn.menu.methods[e](this,t):(e=e||{},this.each(function(){var t=$.data(this,"menu");t?$.extend(t.options,e):(t=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),e)}),init(this)),$(this).css({left:t.options.left,top:t.options.top})}))},$.fn.menu.methods={options:function(e){return $.data(e[0],"menu").options},show:function(e,t){return e.each(function(){showMenu(this,t)})},hide:function(e){return e.each(function(){hideAll(this)})},destroy:function(e){return e.each(function(){destroyMenu(this)})},setText:function(e,t){return e.each(function(){$(t.target).children("div.menu-text").html(t.text)})},setIcon:function(e,t){return e.each(function(){$(t.target).children("div.menu-icon").remove(),t.iconCls&&$('<div class="menu-icon"></div>').addClass(t.iconCls).appendTo(t.target)})},getItem:function(e,t){var n=$(t),i={target:t,id:n.attr("id"),text:$.trim(n.children("div.menu-text").html()),disabled:n.hasClass("menu-item-disabled"),name:t.itemName,href:t.itemHref,onclick:t.onclick},o=n.children("div.menu-icon");if(o.length){for(var a=[],s=o.attr("class").split(" "),u=0;u<s.length;u++)"menu-icon"!=s[u]&&a.push(s[u]);i.iconCls=a.join(" ")}return i},findItem:function(e,t){return findItem(e[0],t)},appendItem:function(e,t){return e.each(function(){appendItem(this,t)})},removeItem:function(e,t){return e.each(function(){removeItem(this,t)})},enableItem:function(e,t){return e.each(function(){setDisabled(this,t,!1)})},disableItem:function(e,t){return e.each(function(){setDisabled(this,t,!0)})},showItem:function(e,t){return e.each(function(){setVisible(this,t,!0)})},hideItem:function(e,t){return e.each(function(){setVisible(this,t,!1)})},resize:function(e,t){return e.each(function(){setMenuSize(this,$(t))})}},$.fn.menu.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,[{minWidth:"number",duration:"number",hideOnUnhover:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,duration:100,hideOnUnhover:!0,onShow:function(){},onHide:function(){},onClick:function(e){}}}(jQuery);
//# sourceMappingURL=jquery.menu.js.map