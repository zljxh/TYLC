function getCaiNiaoPrint(t,e){var i,l="<br><font color='#FF00FF'>打印组件未安装!<a href='http://www.taobao.com/market/cainiao/eleprint.php' target='_self'>请点击这里</a>,下载32位安装程序,安装后请刷新页面或重新进入。</font>",n="<br><font color='#FF00FF'>打印组件需要升级!点击这里<a href=' http://www.taobao.com/market/cainiao/eleprint.php' target='_self'>请点击这里</a>,下载32位安装程序，安装升级后请重新进入。</font>",r="<br><font color='#FF00FF'>打印组件未安装!点击这里<a href=' http://www.taobao.com/market/cainiao/eleprint.php' target='_self'>请点击这里</a>,下载64位安装程序，安装后请刷新页面或重新进入。</font>";try{var o=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,a=o&&navigator.userAgent.indexOf("x64")>=0;return void 0!=t||void 0!=e?i=o?t:e:null==CreatedOKCNPrint7766?(i=document.createElement("object"),i.setAttribute("width",0),i.setAttribute("height",0),i.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),o?i.setAttribute("classid","clsid:09896DB8-1189-44B5-BADC-D6DB5286AC57"):i.setAttribute("type","application/x-cainiaoprint"),document.body.appendChild(i),CreatedOKCNPrint7766=i):i=CreatedOKCNPrint7766,null==i||void 0===i.VERSION?(navigator.userAgent.indexOf("Chrome")>=0&&(document.documentElement.innerHTML=""+document.documentElement.innerHTML),navigator.userAgent.indexOf("Firefox")>=0&&(document.documentElement.innerHTML=""+document.documentElement.innerHTML),a?document.write(r):o?document.write(l):document.documentElement.innerHTML=l+document.documentElement.innerHTML,i):i.VERSION<"1.0.0.0"?(a?document.write("<br><font color='#FF00FF'>打印组件需要升级!点击这里<a href=' http://www.taobao.com/market/cainiao/eleprint.php' target='_self'>请点击这里</a>,下载64位安装程序，安装升级后请重新进入。</font>"):o?document.write(n):document.documentElement.innerHTML=n+document.documentElement.innerHTML,i):i}catch(t){return document.documentElement.innerHTML=a?"Error:"+r+document.documentElement.innerHTML:"Error:"+l+document.documentElement.innerHTML,i}}vm.Control=vm.Control||{},vm.Control.MultiSelectProductModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectProduct",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectProductByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectProductByPQP",this.griddataParameter.toolbar=".tbMultiSelectProduct";var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={remoteSort:!1,columns:[[{title:"选择",field:"ck",checkbox:!0,sortable:!0},{title:"商品简称",field:"ProductShortName",width:120,align:"left",sortable:!0},{title:"商品代码",field:"ProductCode",width:120,align:"left",sortable:!0},{title:"商品名称",field:"ProductName",width:120,align:"left",sortable:!0},{title:"规格代码",field:"ProductSkuCode",width:120,align:"left",sortable:!0},{title:"规格名称",field:"ProductSkuName",width:120,align:"left",sortable:!0},{title:"库存",field:"InventoryQuantity",width:120,align:"left",sortable:!0},{title:"可用库存",field:"KYQuantity",width:120,align:"left",sortable:!0},{title:"是否赠品",field:"IsGift",width:100,align:"right",hidden:!0},{title:"图片",field:"PicturePath1",width:50,align:"right",hidden:!0},{title:"组合",field:"IsCombin",width:60,align:"left",sortable:!0,formatter:function(t,e,i){return"1"==e.IsCombin?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){if(null!=o){var t=o();if(void 0==t)return;t.ProductCategoryRowId=n,e.gridModel.pSearch(t)}else e.gridModel.pSearch({ProductCategoryRowId:n})};var n=null;this.treeoption={url:"BusinessControl/GetComboTreeProductCategory",onClick:function(t){n=t.id,e.searchClick()}};var r=null,o=null;this.setParameter=function(t){r=t.callback,o=t.getData},this.addProduct=function(){if(null!=r){var t=e.gridModel.datagrid("getSelections");r(t),e.gridModel.datagrid("clearChecked")}l()},this.addProductClose=function(){e.addProduct(),ko.c8showMessage("success","添加成功！")}},vm.Control=vm.Control||{},vm.Control.SelectDistributorModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectDistributorModel",this.OperatorGroupRowId=null,this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/Distributor/getpage",this.griddataParameter.countUrl="/Distributor/getcount",this.griddataParameter.toolbar=".tbSelectVip",this.f_DblClickRow=function(t,i){e.addVipClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"代码",field:"Code",width:120,align:"right"},{title:"名称",field:"Name",width:120,align:"right"},{title:"手机",field:"Mobile",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addProduct=function(){if(null!=i){var t=e.gridModel.datagrid("getSelected");i(t)}},this.addVipClose=function(){e.addProduct(),e.c8win&&e.c8win.c8CloseWin()},this.setFormValidate=function(){$(".easyui-textbox").each(function(t,i){$(i).textbox("textbox").keydown(function(t){13==t.keyCode&&e.searchClick()})})}},vm.Control=vm.Control||{},vm.Control.Supplier=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectSupplier",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getSupplierList",this.griddataParameter.countUrl="/BusinessControl/getSupplierCount",this.griddataParameter.toolbar=".tbSelectSupplier",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataSupplierClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"供应商名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addDataSupplier=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addDataSupplierClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectSupplierTextModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectSupplier",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectSupplierByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectSupplierByPQP",this.griddataParameter.toolbar=".tbMultiSelectSupplier",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectSupplierMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectSupplierMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectSupplierMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addPurchaseOrderClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"供应商代码",field:"Code",width:160,align:"right"},{title:"供应商名称",field:"Name",width:80,align:"right"},{title:"公司名称",field:"CompanyName",width:80,align:"right"},{title:"联系人",field:"Contact",width:80,align:"right"},{title:"手机",field:"Mobile",width:80,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addSupplier=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addSupplierClose=function(){e.addSupplier(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectProductBatchModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectProductBatch",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectProductBatchByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectProductBatchByPQP",this.griddataParameter.toolbar=".tbMultiSelectProduct",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectProductMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"商品代码",field:"ProductCode",width:120,align:"left"},{title:"商品名称",field:"ProductName",width:120,align:"left"},{title:"规格代码",field:"ProductSkuCode",width:120,align:"left"},{title:"规格名称",field:"ProductSkuName",width:120,align:"left"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch({ProductCategoryRowId:n})};var n=null;this.treeoption={url:"BusinessControl/GetComboTreeProductCategory",onClick:function(t){n=t.id,e.searchClick()}},this.setParameter=function(t){r=t.callback};var r=null;this.addProduct=function(){if(null!=r){var t=e.gridModel.datagrid("getSelections");r(t),e.gridModel.datagrid("clearChecked")}l()},this.addProductClose=function(){e.addProduct(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectProductBatchInventoryModel=function(t){function e(){return void 0==n||!!l.gridModel.datagrid("validateRow",n)&&(l.gridModel.datagrid("endEdit",n),n=void 0,!0)}function i(t){n!=t&&(e()?(l.gridModel.datagrid("selectRow",t).datagrid("beginEdit",t),n=t):l.gridModel.datagrid("selectRow",n))}var l=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,l.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectProductBatchInventory&433234",this.OperatorGroupRowId=null;var l=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageInventoryBatchProductInfo",this.griddataParameter.countUrl="/BusinessControl/GetCountByPageQueryParameters",this.griddataParameter.toolbar=".tbMultiSelectProductBatchnventory";var n=void 0;this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"仓库名称",field:"WarehouseName",width:120,align:"left"},{title:"库位代码",field:"KWCode",width:100,align:"left"},{title:"数量",field:"Quantity",width:80,align:"right",editor:{type:"numberbox",options:{min:0,precision:0}},formatter:function(t,e){return e.Quantity=e.Quantity||1,e.Quantity}},{title:"锁定数",field:"LockedQuantity",width:80,align:"right"},{title:"库存数",field:"InventoryQuantity",width:80,align:"right"},{title:"商品代码",field:"ProductCode",width:120,align:"left"},{title:"商品名称",field:"ProductName",width:120,align:"left"},{title:"规格代码",field:"ProductSkuCode",width:120,align:"left"},{title:"规格名称",field:"ProductSkuName",width:120,align:"left"},{title:"生产日期",field:"ProductionDate",width:120,align:"left"},{title:"保质期",field:"SafeDate",width:120,align:"left"},{title:"有效期",field:"ValidDate",width:120,align:"left"},{title:"批次号",field:"BatchNo",width:120,align:"left"}]],singleSelect:!1,onClickRow:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){l.gridModel.pSearch(this.callBackParameter.data)},this.callBackParameter=null,this.setParameter=function(t){this.callBackParameter=t,r=t.callback,null!=t.singleSelect&&(l.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var r=null;this.addItem=function(){if(null!=r){e();var t=l.gridModel.datagrid("getSelections");r(t),l.gridModel.datagrid("clearChecked")}},this.addItemClose=function(){l.addItem(),l.c8win&&l.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.MultiSelectShopModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectShop",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectShopByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectShopByPQP",this.griddataParameter.toolbar=".tbMultiSelectShop",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectShopMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectShopMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectShopMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addShopClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"},{title:"代码",field:"Code",width:120,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch({ShopCategoryRowId:n})};var n=null;this.treeoption={url:"BusinessControl/GetComboTreeShopCategory",onClick:function(t){n=t.id,e.searchClick()}},this.setParameter=function(t){r=t.callback};var r=null;this.addShop=function(){if(null!=r){var t=e.gridModel.datagrid("getSelections");r(t)}l()},this.addShopClose=function(){e.addShop(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectPurchaseOrderModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectPurchaseOrder",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectPurchaseOrderByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectPurchaseOrderByPQP",this.griddataParameter.toolbar=".tbMultiSelectPurchaseOrder",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseOrderMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseOrderMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseOrderMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addPurchaseOrderClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"单据编号",field:"Code",width:160,align:"right"},{title:"采购进货类型",field:"PurchaseInTypeName",width:80,align:"right"},{title:"供应商",field:"SupplierName",width:80,align:"right"},{title:"外部编号",field:"OutCode",width:80,align:"right"},{title:"业务员",field:"BusinessEmployeeName",width:80,align:"right"},{title:"仓库",field:"WarehouseName",width:80,align:"right"},{title:"计划到货日期",field:"PlanDeliveryDate",width:80,align:"right"},{title:"付款期限",field:"PayTermDate",width:80,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addPurchaseOrder=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addPurchaseOrderClose=function(){e.addPurchaseOrder(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectPurchaseReturnOrderModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectPurchaseReturnOrder",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectPurchaseReturnOrderByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectPurchaseReturnOrderByPQP",this.griddataParameter.toolbar=".tbMultiSelectPurchaseReturnOrder",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseReturnOrderMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseReturnOrderMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectPurchaseReturnOrderMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addPurchaseReturnOrderClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"单据编号",field:"Code",width:160,align:"right"},{title:"采购进货类型",field:"PurchaseInTypeName",width:80,align:"right"},{title:"供应商",field:"SupplierName",width:80,align:"right"},{title:"外部编号",field:"OutCode",width:80,align:"right"},{title:"业务员",field:"BusinessEmployeeName",width:80,align:"right"},{title:"仓库",field:"WarehouseName",width:80,align:"right"},{title:"计划到货日期",field:"PlanDeliveryDate",width:80,align:"right"},{title:"付款期限",field:"PayTermDate",width:80,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addPurchaseReturnOrder=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addPurchaseReturnOrderClose=function(){e.addPurchaseReturnOrder(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectWarehousePositionModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectWarehousePosition";var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageWarehouserPositionByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountWarehouserPositionByPQP",this.griddataParameter.toolbar=".tbMultiSelectWarehousePosition",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehousePositionMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehousePositionMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehousePositionMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addWarehousePositionClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"库位代码",field:"Code",width:120,align:"left"},{title:"库位名称",field:"Name",width:120,align:"left"},{title:"仓库名称",field:"WarehouseRowId",width:120,align:"left"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch(this.callBackParameter.data)},this.callBackParameter=null,this.setParameter=function(t){this.callBackParameter=t,n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addWarehousePosition=function(){if(null!=n)if(void 0==this.callBackParameter.singleSelect||this.callBackParameter.singleSelect){var t=e.gridModel.datagrid("getSelected");n(t,this.callBackParameter)}else{var t=e.gridModel.datagrid("getSelections");n(t,this.callBackParameter)}l()},this.addWarehousePositionClose=function(){e.addWarehousePosition(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectWarehouseModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectWarehouse",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectWarehouseByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectWarehouseByPQP",this.griddataParameter.toolbar=".tbMultiSelectWarehouse",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehouseMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehouseMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectWarehouseMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addWarehouseClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"},{title:"代码",field:"Code",width:120,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback};var n=null;this.addWarehouse=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addWarehouseClose=function(){e.addWarehouse(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.MultiSelectVopOutWarehouseModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectVopOutWarehouse",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectVopOutWarehouseByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectVopOutWarehouseByPQP",this.griddataParameter.toolbar=".tbMultiSelectVopOutWarehouse",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectVopOutWarehouseMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectVopOutWarehouseMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectVopOutWarehouseMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addVopOutWarehouseClose()},this.griddataParameter.dataoptions={columns:[[{field:"ck",checkbox:!0,sortable:!0},{title:"出库单号",field:"Code",width:150,align:"center"},{title:"审核",field:"IsAudit",width:40,align:"center",formatter:$.c8formatter.checkbox},{title:"仓库名称",field:"WarehouseName",width:80,align:"center"},{title:"通知数",field:"TotalNoticeQuantity",width:55,align:"center"},{title:"出库数",field:"TotalQuantity",width:55,align:"center"},{title:"唯品会仓库",field:"VopWarehouseName",width:80,align:"center"},{title:"出库时间",field:"WarehouseDeliveryTime",width:140,align:"center"},{title:"备注",field:"Remark",width:100,align:"center"}]],singleSelect:!1,idFiled:"Code",onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addVopOutWarehouse=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addVopOutWarehouseClose=function(){e.addVopOutWarehouse(),e.c8win&&(e.c8win.c8CloseWin(),l())}},$(function(){}),vm.Control=vm.Control||{},vm.Control.MultiSelectRegionModel=function(t){this.winUrl="/BusinessControl/MultiSelectRegion",this.OperatorGroupRowId=null;var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.f_DblClickRow=function(t,i){e.addRegionClose()},this.griddataParameter=t||{},this.griddataParameter.IsFormLayout=!1,this.griddataParameter.dataoptions={singleSelect:!1,iconCls:"icon-ok",rownumbers:!0,animate:!0,collapsible:!0,fitColumns:!0,url:"/Region/GetGridTreeObjectList",method:"get",idField:"RowId",treeField:"Name",columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:80},{title:"代码",field:"Code",width:80}]]},this.gridModel=new c8TreeGrid(this.griddataParameter),this.searchClick=function(){},this.setParameter=function(t){i=t.callback};var i=null;this.addRegion=function(){if(null!=i){var t=e.gridModel.datagrid("getSelections");i(t)}},this.addRegionClose=function(){e.addRegion(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.MultiSelectOrderTypeModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectOrderType",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageMultiSelectOrderTypeByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountMultiSelectOrderTypeByPQP",this.griddataParameter.toolbar=".tbMultiSelectOrderType",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectOrderTypeMenu")),e.gridModel.c8GetElementsBySelector("#tbMultiSelectOrderTypeMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbMultiSelectOrderTypeMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addOrderTypeClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback};var n=null;this.addOrderType=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addOrderTypeClose=function(){e.addOrderType(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.SelectWarehousePositionModel=function(t){var e=this;this.winUrl="/BusinessControl/SelectWarehouserPosition",this.OperatorGroupRowId=null,this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageWarehouserPositionByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountWarehouserPositionByPQP",this.griddataParameter.toolbar=".tbSelectWarehousePosition",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"库位代码",field:"Code",width:80,align:"right"},{title:"库位名称",field:"Name",width:80,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch({WarehouseRowId:i})};var i=null;this.treeoption={url:"BusinessControl/GetComboWarehouse",onClick:function(t){i=t.id,e.searchClick()}},this.setParameter=function(t){l=t.callback};var l=null;this.addProduct=function(){if(null!=l){var t=e.gridModel.datagrid("getSelected");l(t)}},this.addProductClose=function(){e.addProduct(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectActiveLockModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectActiveLock",this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectActiveLockByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountSelectActiveLockByPQP",this.griddataParameter.toolbar=".tbSelectActiveLock",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbSelectActiveLockMenu")),e.gridModel.c8GetElementsBySelector("#tbSelectActiveLockMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbSelectActiveLockMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addPurchaseOrderClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"编号",field:"Code",width:160,align:"right"},{title:"名称",field:"Name",width:160,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addPurchaseOrder=function(){if(null!=n){var t=e.gridModel.datagrid("getSelections");n(t)}l()},this.addPurchaseOrderClose=function(){e.addPurchaseOrder(),e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.SelectUnApprovedSellOrder=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=MultiSelectUnArrivalSellOrder",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageUnApprovedSellOrder",this.griddataParameter.countUrl="/BusinessControl/GetCountUnApprovedSellOrder",this.griddataParameter.toolbar=".tbSelectUnArrivalSellOrder",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.UnApprovedSellOrderClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"订单编号",
field:"Code",width:100,align:"right"},{title:"平台单号",field:"Tid",width:100,align:"right"},{title:"店铺名称",field:"ShopName",width:100,align:"right"},{title:"平台名称",field:"PlatTypeRowId",width:100,align:"right"},{title:"未核销金额",field:"UnApprovedAmount",width:80,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addUnApprovedSellOrder=function(){if(null!=i){var t=e.gridModel.datagrid("getSelections");i(t)}},this.UnApprovedSellOrderClose=function(){e.addUnApprovedSellOrder(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectAccountModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectAccountModel",this.OperatorGroupRowId=null,this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageAccountByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountAccountByPQP",this.griddataParameter.toolbar=".tbSelectAccount",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"费用科目名称",field:"AccountName",width:120,align:"right"},{title:"费用科目编码",field:"AccountCode",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addProduct=function(){if(null!=i){var t=e.gridModel.datagrid("getSelected");i(t)}},this.addProductClose=function(){e.addProduct(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectVipModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectVipModel",this.OperatorGroupRowId=null,this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageVipByPQP",this.griddataParameter.countUrl="/BusinessControl/GetCountVipByPQP",this.griddataParameter.toolbar=".tbSelectVip",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addVipClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"会员代码",field:"Code",width:100,align:"right"},{title:"会员名称",field:"Name",width:100,align:"right"},{title:"手机",field:"Mobile",width:100,align:"right"},{title:"平台名称",field:"PlatTypeName",width:100,align:"right"},{title:"店铺",field:"ShopName",width:100,align:"right"},{title:"会员级别",field:"LevelName",width:100,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addProduct=function(){if(null!=i){var t=e.gridModel.datagrid("getSelected");if(null==t)return void $.customerAlert("请选择会员!");i(t),e.c8win&&e.c8win.c8CloseWin()}},this.addVipClose=function(){e.addProduct()}},vm.Control=vm.Control||{},vm.Control.SelectExpress=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectExpress",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getExpressList",this.griddataParameter.countUrl="/BusinessControl/getExpressCount",this.griddataParameter.toolbar=".tbSelectExpress",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataExpressClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"快递名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter);var i=null;this.OpenWin=function(){i=new c8.c8Window({url:e.winUrl,isShowParent:!0}),i.c8BindingWin(e),i.openWin()},this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){l=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var l=null;this.addDataExpress=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=l&&l(t)},this.addDataExpressClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=l?l(t):e.ParentModel.modifyExpressSingle(e.ParentRow.RowId,t[0].RowId,t[0].Name,e.ParentRow),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectReturnChangedOrder=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectReturnChangedOrder",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/PinBackStorage/getByMobileAndRowId",this.griddataParameter.toolbar=".tbSelectReturnChangedOrder",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataExpressClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"退换货单代码",field:"Code",width:200,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter);var i=null;this.OpenWin=function(t){i=new c8.c8Window({url:e.winUrl,isShowParent:!0}),i.c8BindingWin(e),e.gridModel.pSearch({Mobile:t}),i.openWin()},this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){l=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var l=null;this.addDataExpress=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=l&&l(t)},this.addDataExpressClose=function(){var t=e.gridModel.datagrid("getSelections");if(null==t||0==t.length)return void ko.c8showMessage("warn","请选择单据");null!=l?l(t):e.ParentModel.modifyExpressSingle(t[0]),e.c8win&&e.c8win.c8CloseWin()}};var SelectReturnChangedOrder=new vm.Control.SelectReturnChangedOrder;vm.Control=vm.Control||{},vm.Control.SelectWarehouse=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectWarehouse",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getWarehouseList",this.griddataParameter.countUrl="/BusinessControl/getWarehouseCount",this.griddataParameter.toolbar=".tbSelectExpress",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.Close()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"仓库代码",field:"Code",width:120,align:"right"},{title:"仓库名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addDataWarehouse=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addDataWarehouseClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectPositionModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectPosition",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getPositionList",this.griddataParameter.countUrl="/BusinessControl/getPositionCount",this.griddataParameter.toolbar=".tbSelectVip",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataExpressClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"库位代码",field:"Code",width:120,align:"right"},{title:"库位名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter);var i=null,l=null;this.OpenWin=function(t){i=new c8.c8Window({url:e.winUrl,isShowParent:!0}),l=t,e.modelInfo={},e.modelInfo.WarehouseRowId=t,e.modelInfo.Code="",e.modelInfo.Name="",ko.c8SetFormQueryModel({model:e.modelInfo}),i.c8BindingWin(e),i.openWin()},this.searchClick=function(){""!=$("#Code").val()&&$("#Code").val(),""!=$("#Name").val()&&$("#Name").val();var t=i.c8GetFormModel();t.WarehouseRowId=l,e.gridModel.pSearch(t)},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addDataExpress=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=n&&n(t)},this.addDataExpressClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=n?n(t):e.ParentModel.modifyWarehousePosition(t[0],t[0].Name,e.ParentRow),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectFlag=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectFlag",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getFlagList",this.griddataParameter.countUrl="/BusinessControl/getFlagCount",this.griddataParameter.toolbar=".tbSelectExpress",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataFlagClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"旗帜代码",field:"Code",width:100,align:"right"},{title:"旗帜名称",field:"Name",width:100,align:"right"},{title:"淘宝旗帜",field:"RowId",width:100,align:"center",formatter:function(t,e,i){return 0==e.RowId?null:'<img src="/Content/images/taobaoflag/'+e.RowId+'.png" />'}}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addDataFlag=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addDataFlagClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectEmployee=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectEmployee",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getPageEmployeeList",this.griddataParameter.countUrl="/BusinessControl/getPageEmployeeCount",this.griddataParameter.toolbar=".tbSelectExpress",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.Close()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"客服代码",field:"Code",width:120,align:"right"},{title:"客服名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addDataEmployee=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addDataEmployeeClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectPayTypeModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectPayType",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectPayTypeByPQP",this.griddataParameter.toolbar=".tbSelectPayType",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addWarehouseClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addWarehouse=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addWarehouseClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SellOrderModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SellOrder",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getSellOrderSelectPage",this.griddataParameter.countUrl="/BusinessControl/getSellOrderSelectCount",this.griddataParameter.toolbar=".tbSelectUnArrivalSellOrder",this.griddataParameter.dataoptions={remoteSort:!1,singleSelect:!0,checkOnSelect:!1,selectOnCheck:!1,columns:[[{title:"店铺",field:"EditShopName",width:100,align:"right",sortable:!0},{title:"平台单号",field:"Tid",width:130,align:"right",sortable:!0},{title:"付款时间",field:"PayTime",width:130,align:"right",sortable:!0},{title:"收货人",field:"Consignee",width:80,align:"right",sortable:!0},{title:"手机",field:"Mobile",width:110,align:"right",sortable:!0},{title:"会员名称",field:"VipName",width:80,align:"right",sortable:!0},{title:"货到付款",field:"IsCod",width:70,align:"right",sortable:!0,formatter:function(t,e,i){return"1"==e.IsCod?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}},{title:"支付金额",field:"PayAmount",width:70,align:"right",sortable:!0},{title:"运单号",field:"ExpressNumber",width:100,align:"right",sortable:!0},{title:"数量",field:"TotalQuantity",width:50,align:"right",sortable:!0},{title:"平台类型",field:"EditPlatTypeName",width:100,align:"right",sortable:!0},{title:"订单类型",field:"EditOrderTypeName",width:100,align:"right",sortable:!0},{title:"让利金额",field:"BenefitAmount",width:100,align:"right",sortable:!0},{title:"退款状态",field:"EditRefundStatusName",width:100,align:"right",sortable:!0},{title:"发货单号",field:"DeliveryOrderCode",width:150,align:"right",sortable:!0},{title:"订单单号",field:"Code",width:130,align:"right",sortable:!0},{title:"快递费用",field:"ExpressFee",width:80,align:"right",sortable:!0},{title:"电话",field:"Telephone",width:80,align:"right",sortable:!0},{title:"会员代码",field:"VipCode",width:80,align:"right",sortable:!0},{title:"拍单时间",field:"PlatCreated",width:130,align:"right",sortable:!0},{title:"地址",field:"Address",width:200,align:"right",sortable:!0}]],singleSelect:!0,onSelect:function(t,i){var l=$(e.gridModel.grid).datagrid("getSelected");l?e.inSkuDetailGridPaginationModel.pSearch({SellOrderRowId:l.RowId}):e.inSkuDetailGridPaginationModel.pLoadData([])}},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.save=function(){},this.SkuDetailGridDataParameter={},this.SkuDetailGridDataParameter.pageUrl="/BusinessControl/getReturnChangedSellOrderDetailList",this.SkuDetailGridDataParameter.form={},this.SkuDetailGridDataParameter.toolbar=".toolbarProductSku",this.SkuDetailGridDataParameter.dataoptions={remoteSort:!1,singleSelect:!0,checkOnSelect:!1,selectOnCheck:!1,columns:[[{field:"ck",checkbox:!0},{title:"终结",field:"IsStop",width:70,align:"right",sortable:!0,formatter:function(t,e,i){return"1"==e.IsStop?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}},{title:"平台退款",field:"IsRefund",width:70,align:"right",sortable:!0,formatter:function(t,e,i){return"1"==e.IsRefund?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}},{title:"发货状态",field:"EditStatusName",width:70,align:"right",sortable:!0},{title:"虚拟商品",field:"IsVirtual",width:70,align:"right",sortable:!0,formatter:function(t,e,i){return"1"==e.IsVirtual?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}},{title:"赠品",field:"IsGift",width:45,align:"right",sortable:!0,formatter:function(t,e,i){return"1"==e.IsGift?"<input type='checkbox'  onchange='this.checked=!this.checked;' readonly='readonly' checked='true' value='true'/>":"<input type='checkbox' onchange='this.checked=!this.checked;' readonly='readonly'    value='false'/>"}},{title:"商品简称",field:"ProductShortName",width:100,align:"right",sortable:!0},{title:"商品名称",field:"ProductName",width:100,align:"right",sortable:!0},{title:"商品代码",field:"ProductCode",width:100,align:"right",sortable:!0},{title:"规格名称",field:"ProductSkuName",width:100,align:"right",sortable:!0},{title:"规格代码",field:"ProductSkuCode",width:100,align:"right",sortable:!0},{title:"数量",field:"Quantity",width:45,align:"right",sortable:!0},{title:"商品单位",field:"ProductUnitName",width:70,align:"right",sortable:!0},{title:"让利金额",field:"BenefitAmount",width:70,align:"right",sortable:!0},{title:"折扣",field:"Discount",width:45,align:"right",sortable:!0},{title:"标准售价",field:"StandardPrice",width:70,align:"right",sortable:!0},{title:"销售单价",field:"SalePrice",width:70,align:"right",sortable:!0},{title:"销售金额",field:"SaleAmount",width:70,align:"right",sortable:!0},{title:"实付单价",field:"PaymentPrice",width:70,align:"right",sortable:!0},{title:"实付金额",field:"Payment",width:70,align:"right",sortable:!0},{title:"物流费用",field:"ExpressFee",width:70,align:"right",sortable:!0},{title:"发货单号",field:"DeliveryOrderCode",width:140,align:"right",sortable:!0},{title:"发货仓库",field:"EditWarehouseName",width:100,align:"right",sortable:!0},{title:"物流公司",field:"EditExpressName",width:100,align:"right",sortable:!0},{title:"运单号",field:"ExpressNumber",width:100,align:"right",sortable:!0},{title:"成本价",field:"CostPrice",width:100,align:"right",sortable:!0}]]},this.inSkuDetailGridPaginationModel=new c8Grid(this.SkuDetailGridDataParameter),this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.SellOrder=function(){if(null!=i){var t={},l=$(this.gridModel.grid).datagrid("getSelected");if(!l)return void $.messager.alert("提示","请选择主表");var n=$(e.inSkuDetailGridPaginationModel.grid).datagrid("getChecked");t.Order=l,t.SkuDetailList=n,i(t)}},this.SelectSellOrder=function(){if(!$(this.gridModel.grid).datagrid("getSelected"))return void ko.c8showMessage("error","请选择主表");var t=$(e.inSkuDetailGridPaginationModel.grid).datagrid("getChecked");if(!t||0==t.length)return void ko.c8showMessage("error","请选择明细");e.SellOrder(),e.c8win&&e.c8win.c8CloseWin()},this.Close=function(){e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectCostTypeModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectCostTypeModel",this.OperatorGroupRowId=null,this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/getCostTypeList",this.griddataParameter.countUrl="/BusinessControl/GetCountCostType",this.griddataParameter.toolbar=".tbSelectCostType",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={singleSelect:!0,columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addProduct=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addProductClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectProductSkuModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectProductSku",this.OperatorGroupRowId=null,this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectProductSkuByPQP",this.griddataParameter.toolbar=".tbSelectProductSku",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addProductClose()},this.griddataParameter.dataoptions={remoteSort:!1,columns:[[{title:"选择",field:"ck",checkbox:!0,sortable:!0},{title:"规格代码",field:"Code",width:120,align:"left",sortable:!0},{title:"规格名称",field:"Name",width:300,align:"left",sortable:!0}]],singleSelect:!0,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch({ProductRowId:e.ProductRowId})},this.ProductRowId=null,this.setParameter=function(t){i=t.callback};var i=null;this.addProduct=function(){if(null!=i){var t=e.gridModel.datagrid("getSelections");i(t),e.gridModel.datagrid("clearChecked")}},this.addProductClose=function(){e.addProduct(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectVopPick=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectVopPick",this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetVopPickList",this.griddataParameter.countUrl="/BusinessControl/GetVopPickCount",this.griddataParameter.toolbar=".tbSelectVopPick",this.griddataParameter.IsFormLayout=!1;var i=function(t,i,l){t.preventDefault(),e.gridModel.datagrid("selectRow",i),e.gridModel.getWindowContext().ko.c8BindingViewModel(e,e.gridModel.c8GetElementsBySelector("#tbMultiSelectVopPickMenu")),e.gridModel.c8GetElementsBySelector("#tbSelectVopPickMenu").menu("show",{left:t.pageX,top:t.pageY})},l=function(){e.gridModel.c8GetElementsBySelector("#tbSelectVopPickMenu").menu("hide")};this.f_DblClickRow=function(t,i){e.addVopPickClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"拣货单号",field:"PickNo",width:80,align:"right"},{title:"PO单号",field:"PoNo",width:160,align:"right"},{title:"RowId",field:"RowId",width:80,align:"right",hidden:"true"},{title:"供应商名称",field:"VopVendorName",width:80,align:"right"},{title:"唯品会仓库",field:"SellSite",width:80,align:"right"},{title:"平台数量",field:"Stock",width:80,align:"right"},{title:"通知数",field:"NoticeQuantity",width:80,align:"right"},{title:"出库数",field:"OutQuantity",width:80,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow,onRowContextMenu:i},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){n=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var n=null;this.addVopPick=function(){if(null==n)return!1;var t=e.gridModel.datagrid("getSelections");if(t.length<=0)return!0;for(var i=t[0].PoNo,r=t[0].SellSite,o=0;o<t.length;o++)if(i!=t[o].PoNo||r!=t[o].SellSite)return!1;return n(t),l(),!0},this.addVopPickClose=function(){if(!e.addVopPick())return void $.customerAlert("请选择同一个唯品会仓库及PO单号下的拣货单！");e.c8win&&(e.c8win.c8CloseWin(),l())}},vm.Control=vm.Control||{},vm.Control.SelectSeparateBoxWaveModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectSeparateBoxWave",this.baseModel=null;var i=null;this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectSeparateBoxWaveByPQP",this.griddataParameter.toolbar=".tbSelectSeparateBoxWave",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addSeparateBoxWaveClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"波次号",field:"WaveCode",width:150,align:"right"},{title:"数量",field:"TotalBillQuantity",width:120,align:"right"},{title:"扫描数量",field:"TotalBoxQuantity",width:190,align:"center"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){null==i?(e.gridModel.pSearch(),e.gridModel.datagrid("hideColumn","TotalBoxQuantity")):e.gridModel.pSearch(i())},this.setParameter=function(t){l=t.callback,i=t.getData};var l=null;this.addSeparateBoxWave=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=l&&l(t)},this.addSeparateBoxWaveClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=l&&l(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.MultiSelectProvinceModel=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/MultiSelectProvince",this.OperatorGroupRowId=null;var e=this;this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetMultiSelectProvince",this.griddataParameter.toolbar=".tbMultiSelectProvince",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addProvinceClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"名称",field:"Name",width:120,align:"right"}]],singleSelect:!1},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addProvince=function(){if(null!=i){var t=e.gridModel.datagrid("getSelections");i(t)}},this.addProvinceClose=function(){e.addProvince(),e.c8win&&e.c8win.c8CloseWin()}},vm.Control=vm.Control||{},vm.Control.SelectPostPrintOrderWaveModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectPostPrintOrderWave",this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectPostPrintOrderWaveByPQP",this.griddataParameter.toolbar=".tbSelectPostPrintOrderWave",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addPostPrintOrderWaveClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"波次号",field:"WaveCode",width:150,align:"right"},{title:"单据数量",field:"TotalBillQuantity",width:90,align:"center"},{title:"未打印数量",field:"noPrintCount",width:90,align:"center"},{title:"后置打单锁定人",field:"lockUserName",width:150,align:"center"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addPostPrintOrderWave=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addPostPrintOrderWaveClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectPostPrintOrder2WaveModel=function(t){var e=this;this.winUrl="/BusinessControl/getControlView?ControlName=SelectPostPrintOrder2Wave",this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/GetPageSelectPostPrintOrder2WaveByPQP",this.griddataParameter.toolbar=".tbSelectPostPrintOrder2Wave",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addPostPrintOrderWaveClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"波次号",field:"WaveCode",width:150,align:"right"},{title:"一单一货",field:"IsLonely",width:90,align:"center",formatter:function(t,e,i){return 1==t?"是":"否"}},{title:"仓库",field:"WarehouseName",width:100,sortable:!0,align:"right"},{title:"快递公司",field:"ExpressName",width:120,sortable:!0,align:"right"},{title:"单据数量",field:"TotalBillQuantity",width:80,align:"center"},{title:"作废数量",field:"CancelBillQuantity",width:80,align:"center"},{title:"未打印数量",field:"noPrintCount",width:80,align:"center"},{title:"后置打单锁定人",field:"lockUserName",width:120,align:"center"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8Grid(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addPostPrintOrderWave=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addPostPrintOrderWaveClose=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.Control=vm.Control||{},vm.Control.SelectExpectDeliveryDate=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectExpectDeliveryDate",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.toolbar=".tbSelectExpectDeliveryDate",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addDataFlagClose()},this.gridModel=new c8Grid(this.griddataParameter),this.setParameter=function(t){i=t.callback,null!=t.singleSelect&&(e.griddataParameter.dataoptions.singleSelect=t.singleSelect)};var i=null;this.addExpectDeliveryDateClose=function(){var t=$("#dd").parent().find("span > input:last").val();null!=t&&""!=t&&(null!=i&&i(t),e.c8win&&e.c8win.c8CloseWin())}},vm.PostPrintOrder2=vm.PostPrintOrder2||{},vm.PostPrintOrder2.PickProductsPrint=function(t){this.parentModel=null;var e=this,i=null,l=null,n="",r="",o="",a=null;this.WaveRowId=null,this.excete=function(t,d){if(l=d,n="",r="",o="",null==(i=e.getDefaultPrintTemplate())||""==i)return void ko.c8showMessage("warn","未设置打印模板");l.PRINT_INITA(i.Top,i.LLeft,886,480,"千胜后置打单拣货单打印"),l.SET_PRINT_PAGESIZE(1,i.Width,i.Height,""),a=i.PrintName,l.SET_PRINTER_INDEX(a);var c=t;c.OrderInfo={},c.OrderInfo.WaveCode=c[0].WaveCode,c.OrderInfo.ShopRowID=c[0].ShopRowId,e.setcainiaoprint(c),"0"==a||void 0!=a&&null!=a&&""!=a||(a=l.SELECT_PRINTER()),l.SET_LICENSES("","61A8E196CFE2FC08C91049FE374A647031","",""),l.PRINT()?ko.c8showMessage("打印完成"):ko.c8showMessage("打印错误")},this.setcainiaoprint=function(t){l.ADD_PRINT_DATA("ProgramData",i.ParamStr);var a=JSON.parse(i.ParamJson);for(var d in a)if(1==a[d]){if("TotalProductCount"==d)continue
;"WaveCode"==d?l.SET_PRINT_STYLEA(d,"CONTENT",t.OrderInfo[d]):l.SET_PRINT_CONTENT(d,t.OrderInfo[d])}var c="";if(""==r){var s=l.GET_VALUE("ItemContent","productinfo"),h=s.indexOf("<thead>");h+=7,n=s.substr(0,h);var u=s.indexOf("</thead>");o=s.substr(u+8),r=s.substr(h,u-h)}c=c+n+r+"</thead>";var g=JSON.parse(a.productinfo),w=t;$.each(w,function(t,i){var l=$.c8help.c8CloneObject(r);for(var n in g)1==g[n]&&(l="No"==n?l.replace("序号",t+1):l.replace(e.transferToCn(n),null==i[n]?"":i[n]));c+="<tbody>"+l+"</tbody>"}),c+=o,l.SET_PRINT_CONTENT("productinfo",c)},this.transferToCn=function(t){var e="";return"ProductCode"==t?e="商品代码":"ProductName"==t?e="商品名称":"ProductSkuCode"==t?e="规格代码":"ProductSkuName"==t?e="规格名称":"KwCode"==t?e="库位名称":"WarehouseName"==t?e="仓库名称":"RemainQuantity"==t?e="数量":"WaveCode"==t?e="波次条码":"ShopRowID"==t&&(e="店铺"),e},this.getDefaultPrintTemplate=function(){var t=null;return ko.c8Ajax({type:"GET",url:"/PrintTemplateCaiNiao/getPostPrintOrder2FenJian",async:!1,datatype:"json",contentType:"application/json",success:function(e){t=e},error:function(t){alert(t.responseText)},beforeSend:function(){},complete:function(){}}),t}},vm.Control=vm.Control||{},vm.Control.ShowPostPrintOrder2RemainProducts=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){e.c8winId=t,e.gridModel3.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=ShowPostPrintOrder2RemainProducts",this.baseModel=null,this.griddataParameter3=t||{},this.griddataParameter3.pageUrl="/PostPrintOrder2/GetPostPrintOrder2AllNoScanProducts",this.griddataParameter3.toolbar=".tbSelectPostPrintOrder2AllNoScanProducts",this.griddataParameter3.IsFormLayout=!1,this.griddataParameter3.dataoptions={remoteSort:!1,columns:[[{title:"商品名称",field:"ProductName",width:130,align:"center",sortable:!0},{title:"商品代码",field:"ProductCode",width:130,align:"center",sortable:!0},{title:"商品规格名称",field:"ProductSkuName",width:130,align:"center",sortable:!0},{title:"商品规格代码",field:"ProductSkuCode",width:130,align:"center",sortable:!0},{title:"仓库名称",field:"WarehouseName",width:120,align:"center",sortable:!0},{title:"库位名称",field:"KwCode",width:120,align:"center",sortable:!0},{title:"数量",field:"RemainQuantity",width:80,align:"center",sortable:!0}]],onDblClickRow:function(t,i){e.addProductClose()}},this.gridModel3=new c8Grid(this.griddataParameter3),this.searchClick=function(){e.gridModel3.pSearch()};var i,l=new vm.PostPrintOrder2.PickProductsPrint;this.remainAllNoScanProductsPrint=function(){void 0==i&&(i=getCaiNiaoPrint(null,null)),l.parentModel=e,l.excete(e.gridModel3.datagrid("getRows"),i)};var n=null,r=null;this.setParameter=function(t){n=t.callback,r=t.getData},this.addProductClose=function(){e.addProduct(),e.c8win&&e.c8win.c8CloseWin()},this.addProduct=function(){if(null!=n){var t=e.gridModel3.datagrid("getSelections");n(t),e.gridModel3.datagrid("clearChecked")}},this.remainAllNoScanProductsExport=function(){var t=e.gridModel3.datagrid("getRows");if(null==t||t.length<=0)return void ko.c8showMessage("warn","请选择单据");var i={};i.Parameters=ko.toJSON(t),$.ajaxFileDownload({url:"/PostPrintOrder2/remainAllNoScanProductsExport",data:i,method:"POST"})}},vm.Control=vm.Control||{},vm.Control.SelectInvoiceOrder=function(t){var e=this;this.c8winId=null,this.setWinId=function(t){this.c8winId=t,e.gridModel.c8winId=this.c8winId},this.winUrl="/BusinessControl/getControlView?ControlName=SelectInvoiceOrder",this.baseModel=null,this.griddataParameter=t||{},this.griddataParameter.pageUrl="/BusinessControl/SelectInvoiceOrderByPQP",this.griddataParameter.countUrl="/BusinessControl/SelectInvoiceOrderCountByPQP",this.griddataParameter.toolbar=".tbSelectPayType",this.griddataParameter.IsFormLayout=!1,this.f_DblClickRow=function(t,i){e.addWarehouseClose()},this.griddataParameter.dataoptions={columns:[[{title:"选择",field:"ck",checkbox:!0},{title:"采购发票号码",field:"SupplierInvoiceCode",width:120,align:"right"},{title:"发票代码",field:"SupplierInvoiceCode",width:120,align:"right"},{title:"发票号码",field:"InvoiceNumber",width:120,align:"right"},{title:"发票金额",field:"Amount",width:120,align:"right"}]],singleSelect:!1,onDblClickRow:this.f_DblClickRow},this.gridModel=new c8GridPaginationModel(this.griddataParameter),this.searchClick=function(){e.gridModel.pSearch()},this.setParameter=function(t){i=t.callback};var i=null;this.addWarehouse=function(){var t=e.gridModel.datagrid("getSelections");null!=t&&0!=t.length&&null!=i&&i(t)},this.addWarehouseClose=function(){e.addWarehouse(),e.c8win&&e.c8win.c8CloseWin()}},function(t){t.fn.c8MultiSelectProduct=function(e,i){t(this).unbind("click");var l=new vm.Control.MultiSelectProductModel;e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});e||alert("c8MultiSelectProduct参数不存在"),l.setParameter(e),l.setWinId(n.c8GetWinId()),t(this).click(function(){n.c8OpenWin(),ko.c8BindEnter(t(".SearchConditions input"),function(){l.searchClick()})})},t.fn.c8MultiSelectProductBatchInventory=function(e,i){t(this).unbind("click");var l=new vm.Control.MultiSelectProductBatchInventoryModel;e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});e||alert("c8MultiSelectProductBatchInventory参数不存在"),l.setParameter(e),l.setWinId(n.c8GetWinId()),t(this).click(function(){n.c8OpenWin()})},t.fn.c8MultiSelectProductBatch=function(e,i){t(this).unbind("click");var l=new vm.Control.MultiSelectProductBatchModel;e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});e||alert("c8MultiSelectProductBatch参数不存在"),l.setParameter(e),l.setWinId(n.c8GetWinId()),t(this).click(function(){n.c8OpenWin()})},t.fn.c8MultiSelectShop=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectShopModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8MultiSelectExpress=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectExpressModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8MultiSelectWarehousePositionText=function(e,i){var l=new vm.Control.MultiSelectWarehousePositionModel;l.setParameter(e),l.searchClick(),e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});l.setWinId(n.c8GetWinId());var r={prompt:"请输入采购订单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){n.c8OpenWin()}}]};t(this).textbox(r)},t.fn.c8SelectPurchaseOrderText=function(e,i){var l=new vm.Control.MultiSelectPurchaseOrderModel;l.setParameter(e),e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});l.setWinId(n.c8GetWinId());var r={prompt:"请输入采购订单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){n.c8OpenWin()}}]};t(this).textbox(r)},t.fn.c8SelectSupplierText=function(e,i){var l=new vm.Control.SelectSupplierTextModel;l.setParameter(e),e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l}),r={prompt:"请输入供应商名称",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){n.c8OpenWin()}}]};l.setWinId(n.c8GetWinId()),t(this).textbox(r)},t.fn.c8SelectVopoutWarehouseText=function(e,i){var l=new vm.Control.MultiSelectVopOutWarehouseModel;l.setParameter(e),e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});l.setWinId(n.c8GetWinId());var r={prompt:"请输入出库单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){n.c8OpenWin()}}]};t(this).textbox(r)},t.fn.c8SelectVopPickText=function(e,i){var l=new vm.Control.SelectVopPick;l.setParameter(e),e.windowId=e.windowId||i.c8WindowId;var n=new c8.c8Window({url:l.winUrl,windowId:e.windowId,isShowParent:!0,model:l});l.setWinId(n.c8GetWinId());var r={prompt:"请选择拣货单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){n.c8OpenWin()}}]};t(this).textbox(r)},t.fn.c8MultiSelectOrderType=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectOrderTypeModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8SelectPurchaseReturnOrderText=function(e){var i=new vm.Control.MultiSelectPurchaseReturnOrderModel;i.setParameter(e);var l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setWinId(l.c8GetWinId());var n={prompt:"请输入采购退货订单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){l.c8OpenWin()}}]};t(this).textbox(n)},t.fn.c8MultiSelectEnumInfo=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectOrderTypeModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8MultiSelectWarehouse=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectWarehouseModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8MultiSelectRegion=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectRegionModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8SelectWarehousPosition=function(e){t(this).unbind("click");var i=new vm.Control.SelectWarehousePositionModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.c8SelectActiveLock=function(e){t(this).unbind("click");var i=new vm.Control.SelectActiveLockModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.SelectUnApprovedSellOrderClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectUnApprovedSellOrder,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.SellOrderClick=function(e){var i=new vm.Control.SellOrderModel;i.setParameter(e);var l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setWinId(l.c8GetWinId());var n={prompt:"请选择订单",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(e){l.c8OpenWin(),l.c8GetElementListBySelector(".easyui-textbox").each(function(e,l){t(l).textbox("textbox").keydown(function(t){13==t.keyCode&&i.searchClick()})})}}]};t(this).textbox(n)},t.fn.SelectExpressClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectExpress,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.SelectSupplierClick=function(e){t(this).unbind("click");var i=new vm.Control.Supplier,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.SelectWarehouseClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectWarehouse,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.SelectFlagClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectFlag,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.SelectExpectDeliveryDate=function(e){t(this).unbind("click");var i=new vm.Control.SelectExpectDeliveryDate,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})},t.fn.SelectEmployeeClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectEmployee,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.SelectAccountModelClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectUnApprovedSellOrder,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8SelectPayTypeModelClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectPayTypeModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8SelectVipText=function(e){var i=new vm.Control.SelectVipModel;i.setParameter(e);var l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setWinId(l.c8GetWinId());var n={prompt:"请选择会员",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(e){l.c8OpenWin(),ko.c8BindEnter(t(".SearchConditions input"),function(){i.searchClick()})}}]};t(this).textbox(n)},t.fn.c8SelectDistributorText=function(e){var i=new vm.Control.SelectDistributorModel;i.setParameter(e);var l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setWinId(l.c8GetWinId());var n={prompt:"请选择分销商",iconWidth:18,icons:[{iconCls:"icon-line_edit",handler:function(t){l.c8OpenWin(),i.setFormValidate()}}]};t(this).textbox(n)},t.fn.GridLayoutClick=function(e){t(this).unbind("click");var i=new vm.Control.GridLayout,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.InitData(l.c8GetWinId())})},t.fn.c8SelectSeparateBoxWaveModelClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectSeparateBoxWaveModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8MultiSelectProvince=function(e){t(this).unbind("click");var i=new vm.Control.MultiSelectProvinceModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8SelectPostPrintOrderWaveModelClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectPostPrintOrderWaveModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8SelectPostPrintOrder2WaveModelClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectPostPrintOrder2WaveModel,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),t(".default-checkbox").threeStateCheckbox(),ko.c8BindEnter(t(".SearchConditions input"),function(){i.searchClick()}),i.searchClick()})},t.fn.c8ShowPostPrintOrder2RemainProductsClick=function(e){t(this).unbind("click");var i=new vm.Control.ShowPostPrintOrder2RemainProducts,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin(),i.searchClick()})},t.fn.c8SelectInvoiceOrderClick=function(e){t(this).unbind("click");var i=new vm.Control.SelectInvoiceOrder,l=new c8.c8Window({url:i.winUrl,isShowParent:!0,model:i});i.setParameter(e),i.setWinId(l.c8GetWinId()),t(this).click(function(){l.c8OpenWin()})}}(jQuery);var CreatedOKCNPrint7766=null;
//# sourceMappingURL=control.js.map